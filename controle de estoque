# -*- coding: utf-8 -*-
"""Cont.Vendas prot 01


Automatically generated by Colab.


Original file is located at
Â  Â  https://colab.research.google.com/drive/1jc6mQqWqgV_jl8Tpg50G6fxYrperHsyA
"""


# Instale ipywidgets, se necessÃ¡rio
!pip install ipywidgets --quiet


import ipywidgets as widgets
from IPython.display import display, clear_output
from datetime import datetime


# Estoque inicial
estoque = {
Â  Â  'SanduÃ­che': 20,
Â  Â  'Refrigerante': 15
}


# Lista de vendas
vendas = []


# Widgets de entrada
produto_dropdown = widgets.Dropdown(options=list(estoque.keys()), description='Produto:')
quantidade_input = widgets.BoundedIntText(value=1, min=1, max=100, description='Quantidade:')
registrar_btn = widgets.Button(description='REGISTRAR', button_style='primary')


# Ãreas de exibiÃ§Ã£o
vendas_output = widgets.Output()
estoque_output = widgets.Output()


def atualizar_estoque():
Â  Â  with estoque_output:
Â  Â  Â  Â  clear_output()
Â  Â  Â  Â  print("ğŸ“¦ Estoque:")
Â  Â  Â  Â  for item, qtd in estoque.items():
Â  Â  Â  Â  Â  Â  print(f"{item}: {qtd}")


def atualizar_vendas():
Â  Â  with vendas_output:
Â  Â  Â  Â  clear_output()
Â  Â  Â  Â  print("ğŸ§¾ Vendas:")
Â  Â  Â  Â  for v in vendas:
Â  Â  Â  Â  Â  Â  print(f"{v['data']} - {v['produto']} (Qtd: {v['quantidade']})")


def registrar_venda(b):
Â  Â  produto = produto_dropdown.value
Â  Â  quantidade = quantidade_input.value


Â  Â  if estoque[produto] >= quantidade:
Â  Â  Â  Â  estoque[produto] -= quantidade
Â  Â  Â  Â  vendas.append({
Â  Â  Â  Â  Â  Â  'data': datetime.now().strftime('%d/%m/%Y'),
Â  Â  Â  Â  Â  Â  'produto': produto,
Â  Â  Â  Â  Â  Â  'quantidade': quantidade
Â  Â  Â  Â  })
Â  Â  Â  Â  atualizar_estoque()
Â  Â  Â  Â  atualizar_vendas()
Â  Â  else:
Â  Â  Â  Â  with vendas_output:
Â  Â  Â  Â  Â  Â  print(f"âš ï¸ Estoque insuficiente para {produto}.")


# Conecta o botÃ£o Ã  funÃ§Ã£o
registrar_btn.on_click(registrar_venda)


# Exibe a interface
display(widgets.HTML("<h2>Controle de Vendas</h2>"))
display(produto_dropdown, quantidade_input, registrar_btn)
display(vendas_output)
display(estoque_output)


# Inicializa as Ã¡reas
atualizar_estoque()
atualizar_vendas()
