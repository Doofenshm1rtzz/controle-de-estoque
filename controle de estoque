# -*- coding: utf-8 -*-
"""Cont.Vendas prot 01


Automatically generated by Colab.


Original file is located at
    https://colab.research.google.com/drive/1jc6mQqWqgV_jl8Tpg50G6fxYrperHsyA
"""


# Instale ipywidgets, se necessário
!pip install ipywidgets --quiet


import ipywidgets as widgets
from IPython.display import display, clear_output
from datetime import datetime


# Estoque inicial
estoque = {
    'Sanduíche': 20,
    'Refrigerante': 15
}


# Lista de vendas
vendas = []


# Widgets de entrada
produto_dropdown = widgets.Dropdown(options=list(estoque.keys()), description='Produto:')
quantidade_input = widgets.BoundedIntText(value=1, min=1, max=100, description='Quantidade:')
registrar_btn = widgets.Button(description='REGISTRAR', button_style='primary')


# Áreas de exibição
vendas_output = widgets.Output()
estoque_output = widgets.Output()


def atualizar_estoque():
    with estoque_output:
        clear_output()
        print("📦 Estoque:")
        for item, qtd in estoque.items():
            print(f"{item}: {qtd}")


def atualizar_vendas():
    with vendas_output:
        clear_output()
        print("🧾 Vendas:")
        for v in vendas:
            print(f"{v['data']} - {v['produto']} (Qtd: {v['quantidade']})")


def registrar_venda(b):
    produto = produto_dropdown.value
    quantidade = quantidade_input.value


    if estoque[produto] >= quantidade:
        estoque[produto] -= quantidade
        vendas.append({
            'data': datetime.now().strftime('%d/%m/%Y'),
            'produto': produto,
            'quantidade': quantidade
        })
        atualizar_estoque()
        atualizar_vendas()
    else:
        with vendas_output:
            print(f"⚠️ Estoque insuficiente para {produto}.")


# Conecta o botão à função
registrar_btn.on_click(registrar_venda)


# Exibe a interface
display(widgets.HTML("<h2>Controle de Vendas</h2>"))
display(produto_dropdown, quantidade_input, registrar_btn)
display(vendas_output)
display(estoque_output)


# Inicializa as áreas
atualizar_estoque()
atualizar_vendas()
